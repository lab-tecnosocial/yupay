---
import { Image } from 'astro:assets';
import type { CollectionEntry } from 'astro:content';
import { url } from '../consts';
import FormattedDate from './FormattedDate.astro';

interface Props {
	post: CollectionEntry<'blog'>;
}

const { post } = Astro.props;
---

<article class="post-card">
	<a href={url(`/blog/${post.id}/`)} class="card-link">
		{post.data.heroImage && (
			<div class="card-image">
				<Image width={720} height={360} src={post.data.heroImage} alt={post.data.title} />
			</div>
		)}
		<div class="card-body">
			<p class="card-date">
				<FormattedDate date={post.data.pubDate} />
			</p>
			<h3 class="card-title">{post.data.title}</h3>
			{post.data.description && (
				<p class="card-desc">{post.data.description}</p>
			)}
			<span class="read-more">Leer artículo →</span>
		</div>
	</a>
</article>

<style>
	.post-card {
		border-radius: 12px;
		overflow: hidden;
		background: white;
		box-shadow: 0 2px 8px rgba(0,0,0,0.06);
		transition: box-shadow 0.2s ease, transform 0.2s ease;
	}
	.post-card:hover {
		box-shadow: 0 8px 24px rgba(0,0,0,0.12);
		transform: translateY(-2px);
	}
	.card-link {
		display: block;
		text-decoration: none;
		color: inherit;
	}
	.card-image {
		overflow: hidden;
		aspect-ratio: 2 / 1;
	}
	.card-image img {
		width: 100%;
		height: 100%;
		object-fit: cover;
		border-radius: 0;
		transition: transform 0.3s ease;
	}
	.post-card:hover .card-image img {
		transform: scale(1.03);
	}
	.card-body {
		padding: 1.25em 1.5em 1.5em;
	}
	.card-date {
		font-size: 0.82em;
		color: var(--yupay-amber);
		font-weight: 600;
		margin: 0 0 0.4em;
	}
	.card-title {
		font-size: 1.15em;
		color: var(--yupay-black);
		margin: 0 0 0.5em;
		line-height: 1.3;
		font-weight: 700;
	}
	.card-desc {
		font-size: 0.9em;
		color: var(--yupay-gray);
		line-height: 1.5;
		margin: 0 0 1em;
		display: -webkit-box;
		-webkit-line-clamp: 3;
		-webkit-box-orient: vertical;
		overflow: hidden;
	}
	.read-more {
		font-size: 0.85em;
		color: var(--yupay-amber);
		font-weight: 700;
	}
</style>
