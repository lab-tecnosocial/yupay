---
import { Image } from 'astro:assets';
import { getCollection } from 'astro:content';
import Logo from '../assets/logo.png';
import BaseHead from '../components/BaseHead.astro';
import Footer from '../components/Footer.astro';
import Header from '../components/Header.astro';
import PostCard from '../components/PostCard.astro';
import { SITE_DESCRIPTION, SITE_TITLE, url } from '../consts';

const posts = (await getCollection('blog'))
	.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
	.slice(0, 3);
---

<!doctype html>
<html lang="es">
	<head>
		<BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
		<style>
			/* ---- Hero ---- */
			.hero {
				background: #0D0C0A;
				position: relative;
				overflow: hidden;
				padding: 5em 1.5em 7em;
				text-align: center;
			}
			/* Andean grid pattern */
			.hero::before {
				content: '';
				position: absolute;
				inset: 0;
				background-image:
					repeating-linear-gradient(0deg, transparent, transparent 40px, rgba(255,184,0,0.04) 40px, rgba(255,184,0,0.04) 41px),
					repeating-linear-gradient(90deg, transparent, transparent 40px, rgba(255,184,0,0.04) 40px, rgba(255,184,0,0.04) 41px);
				pointer-events: none;
			}
			/* Diagonal wedge transition to cream */
			.hero::after {
				content: '';
				position: absolute;
				bottom: -1px;
				left: 0;
				right: 0;
				height: 90px;
				background: var(--yupay-cream);
				clip-path: polygon(0 100%, 100% 0, 100% 100%);
			}
			.hero-inner {
				position: relative;
				z-index: 1;
				max-width: 720px;
				margin: 0 auto;
			}
			/* Glowing logo */
			.hero-logo-wrap {
				position: relative;
				display: inline-block;
				margin-bottom: 1.75em;
			}
			.hero-logo-halo {
				position: absolute;
				inset: -32px;
				border-radius: 50%;
				background: radial-gradient(circle, rgba(255,184,0,0.28) 0%, transparent 70%);
				animation: haloPulse 3s ease-in-out infinite;
			}
			.hero-logo-wrap :global(img) {
				position: relative;
				z-index: 1;
				height: 108px;
				width: auto;
				filter: drop-shadow(0 0 28px rgba(255,184,0,0.7)) drop-shadow(0 0 8px rgba(255,184,0,0.4));
				animation: logoGlow 3s ease-in-out infinite alternate;
			}
			@keyframes haloPulse {
				0%, 100% { transform: scale(0.88); opacity: 0.6; }
				50%       { transform: scale(1.12); opacity: 1; }
			}
			@keyframes logoGlow {
				from { filter: drop-shadow(0 0 18px rgba(255,184,0,0.5)) drop-shadow(0 0 6px rgba(255,184,0,0.3)); }
				to   { filter: drop-shadow(0 0 38px rgba(255,184,0,0.85)) drop-shadow(0 0 14px rgba(255,184,0,0.55)); }
			}
			@keyframes fadeUp {
				from { opacity: 0; transform: translateY(18px); }
				to   { opacity: 1; transform: translateY(0); }
			}
			.hero-badge {
				display: inline-block;
				background: rgba(255,184,0,0.12);
				color: var(--yupay-yellow);
				font-size: 0.73em;
				font-weight: 700;
				padding: 0.35em 1.1em;
				border-radius: 9999px;
				margin-bottom: 1em;
				letter-spacing: 0.1em;
				text-transform: uppercase;
				border: 1px solid rgba(255,184,0,0.3);
				animation: fadeUp 0.6s ease both 0.1s;
			}
			.hero h1 {
				font-size: clamp(2em, 5vw, 3.4em);
				color: white;
				margin: 0 0 0.5em;
				line-height: 1.12;
				animation: fadeUp 0.6s ease both 0.2s;
			}
			.hero h1 span {
				color: var(--yupay-yellow);
			}
			.hero-sub {
				font-size: 1.1em;
				color: rgba(255,255,255,0.6);
				max-width: 520px;
				margin: 0 auto 2.25em;
				line-height: 1.65;
				animation: fadeUp 0.6s ease both 0.3s;
			}
			.hero-actions {
				display: flex;
				gap: 1em;
				justify-content: center;
				flex-wrap: wrap;
				animation: fadeUp 0.6s ease both 0.4s;
			}
			.btn-primary {
				background: var(--yupay-yellow);
				color: var(--yupay-black);
				font-weight: 700;
				padding: 0.8em 2.25em;
				border-radius: 9999px;
				text-decoration: none;
				font-size: 1em;
				transition: background-color 0.2s ease, box-shadow 0.2s ease;
				box-shadow: 0 0 22px rgba(255,184,0,0.45);
			}
			.btn-primary:hover {
				background: var(--yupay-yellow-dark);
				color: var(--yupay-black);
				box-shadow: 0 0 36px rgba(255,184,0,0.7);
			}
			.btn-secondary {
				background: transparent;
				color: rgba(255,255,255,0.8);
				font-weight: 600;
				padding: 0.8em 2.25em;
				border-radius: 9999px;
				text-decoration: none;
				font-size: 1em;
				border: 1.5px solid rgba(255,255,255,0.3);
				transition: border-color 0.2s ease, color 0.2s ease;
			}
			.btn-secondary:hover {
				border-color: rgba(255,255,255,0.7);
				color: white;
			}

			/* ---- Shared section styles ---- */
			.section-label {
				display: block;
				font-size: 0.75em;
				font-weight: 700;
				letter-spacing: 0.12em;
				text-transform: uppercase;
				color: var(--yupay-amber);
				margin-bottom: 0.6em;
			}
			.section-header {
				text-align: center;
				margin-bottom: 3em;
			}
			.section-header h2 {
				font-size: 1.9em;
				color: var(--yupay-black);
				margin: 0 0 0.5em;
			}
			.section-header p {
				color: var(--yupay-gray);
				font-size: 1em;
				margin: 0;
				max-width: 480px;
				margin-inline: auto;
			}

			/* ---- Features ---- */
			.features {
				background: white;
				padding: 5.5em 1.5em 4.5em;
			}
			.features-grid {
				display: grid;
				grid-template-columns: repeat(3, 1fr);
				gap: 1.5em;
				max-width: 960px;
				margin: 0 auto;
			}
			.feature-card {
				background: var(--yupay-cream);
				border-radius: 12px;
				padding: 2em 1.5em;
				border-left: 4px solid var(--yupay-yellow);
				transition: transform 0.2s ease, box-shadow 0.2s ease;
			}
			.feature-card:hover {
				transform: translateY(-3px);
				box-shadow: 0 8px 24px rgba(0,0,0,0.07);
			}
			.feature-icon {
				font-size: 2em;
				margin-bottom: 0.6em;
			}
			.feature-card h3 {
				font-size: 1.05em;
				color: var(--yupay-black);
				margin: 0 0 0.5em;
				font-weight: 700;
			}
			.feature-card p {
				font-size: 0.9em;
				color: var(--yupay-gray);
				margin: 0;
				line-height: 1.55;
			}

			/* ---- Latest posts ---- */
			.latest-posts {
				padding: 5.5em 1.5em 4.5em;
				background: var(--yupay-cream);
			}
			.posts-grid {
				display: grid;
				grid-template-columns: repeat(3, 1fr);
				gap: 1.5em;
				max-width: 1100px;
				margin: 0 auto;
			}
			.all-posts-wrap {
				text-align: center;
				margin-top: 2.75em;
			}
			.all-posts-wrap a {
				display: inline-flex;
				align-items: center;
				gap: 0.4em;
				font-weight: 700;
				color: var(--yupay-amber);
				text-decoration: none;
				font-size: 0.95em;
				padding: 0.65em 1.75em;
				border: 2px solid var(--yupay-amber);
				border-radius: 9999px;
				transition: background-color 0.2s ease, color 0.2s ease;
			}
			.all-posts-wrap a:hover {
				background: var(--yupay-amber);
				color: white;
			}

			/* ---- Coming soon ---- */
			.coming-soon {
				background: var(--yupay-black);
				padding: 5.5em 1.5em 4.5em;
			}
			.coming-soon .section-label {
				color: var(--yupay-yellow);
			}
			.coming-soon .section-header h2 {
				color: white;
			}
			.coming-soon .section-header p {
				color: rgba(255,255,255,0.45);
			}
			.coming-grid {
				display: grid;
				grid-template-columns: repeat(3, 1fr);
				gap: 1.5em;
				max-width: 900px;
				margin: 0 auto;
			}
			.coming-card {
				background: rgba(255,255,255,0.04);
				border: 1px solid rgba(255,255,255,0.08);
				border-radius: 12px;
				padding: 2em 1.5em;
				text-align: center;
				transition: background-color 0.2s ease;
			}
			.coming-card:hover {
				background: rgba(255,255,255,0.07);
			}
			.coming-badge {
				display: inline-block;
				background: rgba(255,184,0,0.1);
				color: var(--yupay-yellow);
				font-size: 0.7em;
				font-weight: 700;
				padding: 0.25em 0.85em;
				border-radius: 9999px;
				margin-bottom: 0.85em;
				letter-spacing: 0.06em;
				text-transform: uppercase;
				border: 1px solid rgba(255,184,0,0.25);
			}
			.coming-icon {
				font-size: 2em;
				margin-bottom: 0.5em;
			}
			.coming-card h3 {
				color: white;
				font-size: 1em;
				margin: 0 0 0.4em;
				font-weight: 700;
			}
			.coming-card p {
				color: rgba(255,255,255,0.42);
				font-size: 0.85em;
				margin: 0;
				line-height: 1.55;
			}

			/* ---- Newsletter ---- */
			.newsletter {
				background: #0D0C0A;
				padding: 5em 1.5em;
				text-align: center;
				position: relative;
				overflow: hidden;
			}
			.newsletter::before {
				content: '';
				position: absolute;
				inset: 0;
				background-image:
					repeating-linear-gradient(0deg, transparent, transparent 40px, rgba(255,184,0,0.04) 40px, rgba(255,184,0,0.04) 41px),
					repeating-linear-gradient(90deg, transparent, transparent 40px, rgba(255,184,0,0.04) 40px, rgba(255,184,0,0.04) 41px);
				pointer-events: none;
			}
			.newsletter-inner {
				position: relative;
				z-index: 1;
			}
			.newsletter h2 {
				color: white;
				font-size: 1.8em;
				margin: 0 0 0.4em;
			}
			.newsletter p {
				color: rgba(255,255,255,0.5);
				margin: 0 0 2em;
				font-size: 1em;
			}
			.newsletter-form {
				display: flex;
				gap: 0.6em;
				max-width: 440px;
				margin: 0 auto;
				flex-wrap: wrap;
				justify-content: center;
			}
			.newsletter-form input[type="email"] {
				flex: 1;
				min-width: 220px;
				padding: 0.75em 1.1em;
				border-radius: 9999px;
				border: 1.5px solid rgba(255,255,255,0.15);
				font-size: 1em;
				font-family: inherit;
				outline: none;
				background: rgba(255,255,255,0.07);
				color: white;
			}
			.newsletter-form input[type="email"]::placeholder {
				color: rgba(255,255,255,0.35);
			}
			.newsletter-form input[type="email"]:focus {
				border-color: var(--yupay-yellow);
				background: rgba(255,255,255,0.1);
			}
			.newsletter-form button {
				background: var(--yupay-yellow);
				color: var(--yupay-black);
				font-weight: 700;
				padding: 0.75em 1.75em;
				border-radius: 9999px;
				border: none;
				font-size: 1em;
				font-family: inherit;
				cursor: pointer;
				transition: background-color 0.2s ease, box-shadow 0.2s ease;
				white-space: nowrap;
				box-shadow: 0 0 18px rgba(255,184,0,0.35);
			}
			.newsletter-form button:hover {
				background: var(--yupay-yellow-dark);
				box-shadow: 0 0 28px rgba(255,184,0,0.55);
			}

			@media (max-width: 720px) {
				.features-grid,
				.posts-grid,
				.coming-grid {
					grid-template-columns: 1fr;
				}
				.hero { padding: 4em 1.25em 6em; }
				.hero-logo-wrap :global(img) { height: 80px; }
			}
		</style>
	</head>
	<body>
		<Header />

		<!-- Hero -->
		<section class="hero">
			<div class="hero-inner">
				<div class="hero-logo-wrap">
					<div class="hero-logo-halo"></div>
					<Image src={Logo} alt="Yupay" height={108} />
				</div>
				<span class="hero-badge">EducaciÃ³n Financiera</span>
				<h1>Toma el control de tu <span>dinero en Bolivia</span></h1>
				<p class="hero-sub">
					Aprende a ahorrar, invertir y planificar tu futuro con contenido claro,
					prÃ¡ctico y adaptado a la realidad boliviana.
				</p>
				<div class="hero-actions">
					<a href={url('/blog')} class="btn-primary">Explorar artÃ­culos</a>
					<a href={url('/about')} class="btn-secondary">Conoce Yupay</a>
				</div>
			</div>
		</section>

		<!-- Â¿Por quÃ© Yupay? -->
		<section class="features">
			<div class="section-header">
				<span class="section-label">Â¿Por quÃ© elegirnos?</span>
				<h2>Finanzas bolivianas, explicadas bien</h2>
				<p>Contenido pensado desde y para Bolivia, sin jerga financiera innecesaria.</p>
			</div>
			<div class="features-grid">
				<div class="feature-card">
					<div class="feature-icon">ðŸ‡§ðŸ‡´</div>
					<h3>Contexto boliviano</h3>
					<p>Hablamos de UFV, AFP, DPF y la Bolsa Boliviana de Valores, no de mercados extranjeros.</p>
				</div>
				<div class="feature-card">
					<div class="feature-icon">ðŸ“–</div>
					<h3>Lenguaje claro</h3>
					<p>Sin tecnicismos innecesarios. Conceptos complejos explicados de forma simple y directa.</p>
				</div>
				<div class="feature-card">
					<div class="feature-icon">ðŸŽ¯</div>
					<h3>AcciÃ³n prÃ¡ctica</h3>
					<p>Cada artÃ­culo termina con pasos concretos que puedes implementar hoy mismo.</p>
				</div>
			</div>
		</section>

		<!-- Ãšltimos artÃ­culos -->
		<section class="latest-posts">
			<div class="section-header">
				<span class="section-label">Del blog</span>
				<h2>Ãšltimos artÃ­culos</h2>
				<p>Contenido fresco sobre finanzas personales en Bolivia.</p>
			</div>
			<div class="posts-grid">
				{posts.map((post) => <PostCard post={post} />)}
			</div>
			<div class="all-posts-wrap">
				<a href={url('/blog')}>Ver todos los artÃ­culos â†’</a>
			</div>
		</section>

		<!-- PrÃ³ximamente -->
		<section class="coming-soon">
			<div class="section-header">
				<span class="section-label">PrÃ³ximamente</span>
				<h2>Herramientas en camino</h2>
				<p>Estamos construyendo mÃ¡s formas de ayudarte.</p>
			</div>
			<div class="coming-grid">
				<div class="coming-card">
					<div class="coming-badge">En desarrollo</div>
					<div class="coming-icon">ðŸ“±</div>
					<h3>App Yupay</h3>
					<p>Lleva tu educaciÃ³n financiera en el bolsillo. Control de gastos y metas de ahorro.</p>
				</div>
				<div class="coming-card">
					<div class="coming-badge">En desarrollo</div>
					<div class="coming-icon">ðŸ§®</div>
					<h3>Calculadoras</h3>
					<p>Simula el crecimiento de un DPF, calcula tu jubilaciÃ³n o proyecta tus ahorros.</p>
				</div>
				<div class="coming-card">
					<div class="coming-badge">En desarrollo</div>
					<div class="coming-icon">ðŸ“Š</div>
					<h3>Planificador</h3>
					<p>Crea un presupuesto mensual en minutos con categorÃ­as adaptadas a Bolivia.</p>
				</div>
			</div>
		</section>

		<!-- Newsletter -->
		<section class="newsletter">
			<div class="newsletter-inner">
				<h2>Recibe contenido nuevo cada semana</h2>
				<p>Sin spam. Solo artÃ­culos prÃ¡cticos sobre finanzas personales en Bolivia.</p>
				<form class="newsletter-form" onsubmit="return false;">
					<input type="email" placeholder="tu@correo.com" aria-label="Tu correo electrÃ³nico" />
					<button type="submit">Suscribirme</button>
				</form>
			</div>
		</section>

		<Footer />
	</body>
</html>
